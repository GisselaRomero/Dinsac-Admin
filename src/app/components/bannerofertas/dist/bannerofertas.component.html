<div class="banner-container">

  <h2>ğŸ“¤ Subir Banner</h2>
  <p class="subtext">
    Selecciona el tipo de banner y sube una imagen en formato JPG o PNG (mÃ¡ximo 5MB).
  </p>

  <!-- Selector de tipo de banner -->
  <div class="banner-type">
    
    <label>
      <input 
        type="radio" 
        name="tipoBanner" 
        [(ngModel)]="tipoBanner" 
        value="principal"
        [disabled]="isLoading">
      ğŸ¯ Banner Principal (PÃ¡gina Ofertas)
    </label>

    <label>
      <input 
        type="radio" 
        name="tipoBanner" 
        [(ngModel)]="tipoBanner" 
        value="ofertasHome"
        [disabled]="isLoading">
      ğŸ·ï¸ Banner Ofertas Home
    </label>

    <label>
      <input 
        type="radio" 
        name="tipoBanner" 
        [(ngModel)]="tipoBanner" 
        value="carrusel"
        [disabled]="isLoading">
      ğŸ  Carrusel Home (3 imÃ¡genes)
    </label>

  </div>

  <!-- Mensaje informativo -->
  <div class="info-box" *ngIf="tipoBanner">
    <p *ngIf="tipoBanner === 'principal'">
      ğŸ“ Este banner aparecerÃ¡ en la pÃ¡gina de Ofertas (arriba de los productos)
    </p>
    <p *ngIf="tipoBanner === 'ofertasHome'">
      ğŸ“ Este banner aparecerÃ¡ en la secciÃ³n "Ofertas Destacadas" del Home
    </p>
    <p *ngIf="tipoBanner === 'carrusel'">
      ğŸ“ Estas 3 imÃ¡genes formarÃ¡n el carrusel principal del Home
    </p>
  </div>

  <!-- ========== BANNERS INDIVIDUALES ========== -->
  <div *ngIf="tipoBanner !== 'carrusel'">
    <input 
      type="file" 
      accept="image/*" 
      (change)="onFileSelected($event)" 
      class="file-input"
      [disabled]="isLoading"
    />

    <div class="preview" *ngIf="previewUrl">
      <img [src]="previewUrl" alt="Vista previa">
    </div>

    <button 
      class="btn-upload" 
      (click)="subirBanner()" 
      [disabled]="!selectedFile || isLoading">
      {{ isLoading ? 'â³ Subiendo...' : 'Subir Banner' }}
    </button>
  </div>

  <!-- ========== CARRUSEL ========== -->
  <div *ngIf="tipoBanner === 'carrusel'" class="carrusel-upload">
    
    <!-- IMAGEN 1 -->
    <div class="carrusel-item">
      <label class="carrusel-label">
        <span class="carrusel-number">ğŸ–¼ï¸ Imagen 1</span>
        <input 
          type="file" 
          accept="image/*" 
          (change)="onCarruselFileSelected($event, 0)" 
          class="file-input-carrusel"
          [disabled]="isLoading"
        />
      </label>
      
      <div class="preview-carrusel" *ngIf="carruselPreviews[0]">
        <img [src]="carruselPreviews[0]" alt="Preview 1">
        <button 
          class="btn-remove-small" 
          (click)="eliminarImagenCarrusel(0)"
          [disabled]="isLoading">
          âœ•
        </button>
      </div>
    </div>

    <!-- IMAGEN 2 -->
    <div class="carrusel-item">
      <label class="carrusel-label">
        <span class="carrusel-number">ğŸ–¼ï¸ Imagen 2</span>
        <input 
          type="file" 
          accept="image/*" 
          (change)="onCarruselFileSelected($event, 1)" 
          class="file-input-carrusel"
          [disabled]="isLoading"
        />
      </label>
      
      <div class="preview-carrusel" *ngIf="carruselPreviews[1]">
        <img [src]="carruselPreviews[1]" alt="Preview 2">
        <button 
          class="btn-remove-small" 
          (click)="eliminarImagenCarrusel(1)"
          [disabled]="isLoading">
          âœ•
        </button>
      </div>
    </div>

    <!-- IMAGEN 3 -->
    <div class="carrusel-item">
      <label class="carrusel-label">
        <span class="carrusel-number">ğŸ–¼ï¸ Imagen 3</span>
        <input 
          type="file" 
          accept="image/*" 
          (change)="onCarruselFileSelected($event, 2)" 
          class="file-input-carrusel"
          [disabled]="isLoading"
        />
      </label>
      
      <div class="preview-carrusel" *ngIf="carruselPreviews[2]">
        <img [src]="carruselPreviews[2]" alt="Preview 3">
        <button 
          class="btn-remove-small" 
          (click)="eliminarImagenCarrusel(2)"
          [disabled]="isLoading">
          âœ•
        </button>
      </div>
    </div>

    <!-- Contador -->
    <div class="file-count" *ngIf="contarImagenesCarrusel() > 0">
      <p>ğŸ“Š {{contarImagenesCarrusel()}} de 3 imÃ¡genes seleccionadas</p>
    </div>

    <!-- BotÃ³n subir -->
    <button 
      class="btn-upload" 
      (click)="subirCarrusel()" 
      [disabled]="contarImagenesCarrusel() === 0 || isLoading">
      {{ isLoading ? 'â³ Subiendo...' : 'Subir ' + contarImagenesCarrusel() + ' imagen(es) al Carrusel' }}
    </button>
  </div>

  <!-- Mensaje -->
  <p 
    class="mensaje" 
    [class.success]="mensaje.includes('âœ…')" 
    [class.error]="mensaje.includes('âŒ')" 
    [class.warning]="mensaje.includes('âš ï¸')"
    *ngIf="mensaje">
    {{ mensaje }}
  </p>

</div>